<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Speech - Tulz.net</title>
    <meta name="description"
        content="Convert text to natural sounding speech using browser native technology. Free and unlimited.">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <header>
        <div class="container">
            <nav>
                <a href="../index.html" class="logo">Tulz.net</a>
                <div class="nav-links">
                    <a href="../index.html">Home</a>
                    <a href="../index.html#ai-tools">AI Tools</a>
                </div>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="tool-container">
            <h1>Text to Speech Converter</h1>

            <div class="input-group">
                <textarea id="text-input" rows="6" placeholder="Type something here to hear it..."></textarea>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                <select id="voice-select">
                    <option value="">Select Voice...</option>
                </select>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <label>Speed:</label>
                    <input type="range" id="rate" min="0.5" max="2" value="1" step="0.1" style="flex:1;">
                </div>
            </div>

            <div style="display: flex; gap: 1rem;">
                <button class="btn" onclick="speak()">▶ Play</button>
                <button class="btn btn-secondary" onclick="stop()">⏹ Stop</button>
            </div>
        </div>
    </main>

    <script src="../js/main.js"></script>
    <script>
        const synth = window.speechSynthesis;
        const voiceSelect = document.getElementById('voice-select');
        let voices = [];

        function loadVoices() {
            voices = synth.getVoices();
            voiceSelect.innerHTML = '<option value="">Default Voice</option>';
            voices.forEach((voice) => {
                const option = document.createElement('option');
                option.textContent = `${voice.name} (${voice.lang})`;
                option.value = voice.name;
                voiceSelect.appendChild(option);
            });
        }

        if (speechSynthesis.onvoiceschanged !== undefined) {
            speechSynthesis.onvoiceschanged = loadVoices;
        }

        function speak() {
            if (synth.speaking) {
                console.error('speechSynthesis.speaking');
                return;
            }
            const text = document.getElementById('text-input').value;
            if (text !== '') {
                const utterThis = new SpeechSynthesisUtterance(text);
                const selectedOption = voiceSelect.value;
                const selectedVoice = voices.find(v => v.name === selectedOption);

                if (selectedVoice) utterThis.voice = selectedVoice;
                utterThis.rate = document.getElementById('rate').value;

                synth.speak(utterThis);
            }
        }

        function stop() {
            synth.cancel();
        }

        loadVoices();
    </script>
</body>

</html>